# 设计数据表

<!-- truncate -->

安装flask_migrate

```shell
pip install flask_migrate
```



manage.py代码如下：

```python
# manage.py 
from flask import Flask
from flask_sqlalchemy import SQLAlchemy
from datetime import datetime
from flask_migrate import Migrate


app = Flask(__name__)
app.config['SECRET_KEY'] = 'daxiongketang'
app.config['SQLALCHEMY_DATABASE_URI'] = (
    'mysql+pymysql://root:andy123456@localhost/daxiong?charset=utf8mb4'
)

db = SQLAlchemy(app)
migrate = Migrate(app, db)


@app.route('/')
def index():
    return "hello world"
  

if __name__ == "__main__":
		app.run()
```



设置FLASK_APP:

- windows系统设置如下：

```shell
set FLASK_APP=manage.py
```

- mac系统用户设置如下：

```shell
export FLASK_APP=manage.py
```



执行数据迁移：

```shell
flask db init
```



```shell
flask db migrate
```



```
flask db upgrade
```

执行完毕后，检查数据库中是否新增了3张表：

- alembic_version 迁移表
- course 课程表
- sale 销量表



### 执行SQL语句填充数据

使用navicat 或其他命令行工具，执行SQL语句, 例如：

```sql
BEGIN;
INSERT INTO `course` VALUES ();
INSERT INTO `course` VALUES ();
COMMIT;
```



执行完成后，检查数据库中是否新增了数据。