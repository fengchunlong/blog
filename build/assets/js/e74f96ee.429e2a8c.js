"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[149],{9779:(n,e,s)=>{s.r(e),s.d(e,{assets:()=>c,contentTitle:()=>d,default:()=>h,frontMatter:()=>r,metadata:()=>t,toc:()=>o});var i=s(5893),l=s(1151);const r={},d="[\u6a21\u578b]:\u521b\u5efa\u6a21\u578b",t={id:"Django\u57fa\u7840\u6559\u7a0b/\u521b\u5efa\u6a21\u578b",title:"[\u6a21\u578b]:\u521b\u5efa\u6a21\u578b",description:"\u6570\u636e\u5e93\u6211\u4eec\u5df2\u7ecf\u51c6\u5907\u597d\u4e86\uff0c",source:"@site/docs/Django\u57fa\u7840\u6559\u7a0b/19.\u521b\u5efa\u6a21\u578b.md",sourceDirName:"Django\u57fa\u7840\u6559\u7a0b",slug:"/Django\u57fa\u7840\u6559\u7a0b/\u521b\u5efa\u6a21\u578b",permalink:"/docs/Django\u57fa\u7840\u6559\u7a0b/\u521b\u5efa\u6a21\u578b",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Django\u57fa\u7840\u6559\u7a0b/19.\u521b\u5efa\u6a21\u578b.md",tags:[],version:"current",sidebarPosition:19,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"[\u6a21\u578b]:\u914d\u7f6eMySQL",permalink:"/docs/Django\u57fa\u7840\u6559\u7a0b/\u914d\u7f6emysql"},next:{title:"[\u6a21\u578b]:\u8bbe\u7f6eMeta\u5143\u6570\u636e",permalink:"/docs/Django\u57fa\u7840\u6559\u7a0b/\u8bbe\u7f6emeta\u539f\u6570\u636e"}},c={},o=[{value:"\u521b\u5efaUser\u6a21\u578b",id:"\u521b\u5efauser\u6a21\u578b",level:2},{value:"\u5173\u8054Article\u6a21\u578b",id:"\u5173\u8054article\u6a21\u578b",level:2},{value:"\u6267\u884c\u6570\u636e\u8fc1\u79fb",id:"\u6267\u884c\u6570\u636e\u8fc1\u79fb",level:2}];function a(n){const e={admonition:"admonition",code:"code",h1:"h1",h2:"h2",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,l.a)(),...n.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.h1,{id:"\u6a21\u578b\u521b\u5efa\u6a21\u578b",children:"[\u6a21\u578b]:\u521b\u5efa\u6a21\u578b"}),"\n",(0,i.jsx)(e.p,{children:"\u6570\u636e\u5e93\u6211\u4eec\u5df2\u7ecf\u51c6\u5907\u597d\u4e86\uff0c\n\u90a3\u63a5\u4e0b\u6765\u5462\uff0c\u6211\u4eec\u5c31\u901a\u8fc7OrM\u7684\u65b9\u5f0f\n\u6765\u521b\u5efa\u6a21\u578b\u3002"}),"\n",(0,i.jsx)(e.p,{children:"\u90a3\u4e48\u5728\u521b\u5efa\u6a21\u578b\u4e4b\u524d\uff0c\u6211\u4eec\u9700\u8981\u77e5\u9053\n\u8fd9\u4e2a\u6a21\u578b\u5c5e\u4e8e\u54ea\u4e00\u4e2a\u5e94\u7528\u4e0b\u7684\u3002\n\u4ee5\u6211\u4eec\u8fd9\u91cc\u4e3a\u4f8b\uff0c\n\u73b0\u5728\u8fd9\u91cc\u6211\u4eec\u6709\u4e09\u4e2a\u5e94\u7528account\u3001 app01\u548cAP02\n\u90a3\u6bd4\u5982\u8bf4\u6211\u60f3\u5728\u8fd9\u4e2aaccount\u5e94\u7528\u4e0b\n\u6765\u521b\u5efa\u6a21\u578b\uff0c\n\u90a3\u4e48\u8fd9\u4e2a\u65f6\u5019\u5462\uff0c\u6211\u5c31\u9700\u8981\u5728\u6211\u7684\u914d\u7f6e\u6587\u4ef6\u4e2d\n\u628a\u8fd9\u4e2a\u5e94\u7528\u5b89\u88c5\u4e0a\u3002"}),"\n",(0,i.jsx)(e.p,{children:"\u627e\u5230\u914d\u7f6e\u6587\u4ef6settings.py, \u627e\u5230INSTALLED_APPS, \u4ee3\u7801\u5982\u4e0b\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-python",metastring:"title='demo/demo/settings.py'",children:"INSTALLED_APPS = [\n    'django.contrib.admin',\n    'django.contrib.auth',\n    'django.contrib.contenttypes',\n    'django.contrib.sessions',\n    'django.contrib.messages',\n    'django.contrib.staticfiles',\n    'account',\n    'app01'\n]\n"})}),"\n",(0,i.jsx)(e.h2,{id:"\u521b\u5efauser\u6a21\u578b",children:"\u521b\u5efaUser\u6a21\u578b"}),"\n",(0,i.jsx)(e.p,{children:"\u63a5\u4e0b\u6765\u54b1\u4eec\u9700\u8981\u627e\u5230\u5bf9\u5e94\u7684\u6a21\u578b\u6587\u4ef6\n\u4e5f\u5c31\u662fmodels.py\u3002\n\u5728\u6bcf\u4e2a\u5e94\u7528\u4e0a\u9762\u90fd\u6709\u4e00\u4e2a\u53eb\u505amodels.py\u8fd9\u6837\u7684\u6587\u4ef6\uff0c\n\u5728\u8be5\u6587\u4ef6\u4e2d\u521b\u5efa\u6a21\u578b\uff0c\u4ee3\u7801\u5982\u4e0b:"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-python",metastring:"titel='demo/account/models.py'",children:"\nfrom django.db import models\n\n# Create your models here.\nclass User(Model):\n    id = models.AutoField(primary_key=True) \n    username = models.CharField('\u7528\u6237\u540d', max_length=30,null=True,blank=True,unique=True)\n    password = models.CharField('\u5bc6\u7801',max_length=30)\n    email = models.EmailField('\u90ae\u7bb1', null=True,blank=True, unique=True)\n"})}),"\n",(0,i.jsxs)(e.admonition,{title:"\u4ee3\u7801\u89e3\u6790",type:"info",children:[(0,i.jsx)(e.p,{children:"\u8fd9\u662f\u7528Django\u6a21\u578b\u5b9a\u4e49\u4e00\u4e2aUser\u7c7b\u7684\u4ee3\u7801\u3002"}),(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u4ecedjango.db.models\u5bfc\u5165BaseModel\u57fa\u7c7b\u3002"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5b9a\u4e49\u4e86\u56db\u4e2a\u5b57\u6bb5:"}),"\n"]}),"\n"]}),(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"id:\u81ea\u589eID\u4e3b\u952e"}),"\n",(0,i.jsx)(e.li,{children:"username:\u7528\u6237\u540d,\u6700\u5927\u957f\u5ea630,\u5141\u8bb8\u4e3a\u7a7a,\u5fc5\u987b\u552f\u4e00"}),"\n",(0,i.jsx)(e.li,{children:"password:\u5bc6\u7801,\u6700\u5927\u957f\u5ea630"}),"\n",(0,i.jsx)(e.li,{children:"email:\u90ae\u7bb1,\u5141\u8bb8\u4e3a\u7a7a,\u5fc5\u987b\u552f\u4e00"}),"\n"]}),(0,i.jsxs)(e.ol,{start:"3",children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u6bcf\u4e2a\u5b57\u6bb5\u90fd\u4f7f\u7528\u4e86models.\u5b57\u6bb5\u7c7b\u578b\u4f5c\u4e3a\u7c7b\u578b\u58f0\u660e\u3002"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5b57\u6bb5\u540d\u4e4b\u540e\u53ef\u4ee5\u901a\u8fc7\u53c2\u6570\u8bbe\u7f6e\u989d\u5916\u7684\u5b57\u6bb5\u9009\u9879,\u5982max_length\u3001null\u3001blank\u3001unique\u7b49\u3002"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"verbose_name\u53c2\u6570\u7528\u4e8e\u8bbe\u7f6e\u6a21\u578b\u7684\u663e\u793a\u540d\u79f0\u3002"}),"\n"]}),"\n"]})]}),"\n",(0,i.jsxs)(e.p,{children:["\u5e38\u7528\u7684\u5b57\u6bb5\u7c7b\u578b\u5982\u4e0b\u6240\u793a\uff1a\n",(0,i.jsx)(e.img,{alt:"\u56fe19-\u5e38\u7528\u5b57\u6bb5\u7c7b\u578b",src:s(2474).Z+"",width:"1578",height:"902"})]}),"\n",(0,i.jsx)(e.p,{children:"\u9664\u6b64\u4e4b\u5916\uff0c\u8868\u4e0e\u8868\u4e4b\u95f4\u8fd8\u6709\u5f88\u591a\u5173\u8054\u5173\u7cfb\uff0c\u6bd4\u5982\u4e00\u5bf9\u4e00\uff0c\u4e00\u5bf9\u591a\uff0c\u548c\u591a\u5bf9\u591a\u7b49\u7b49\u3002\n\u521b\u5efa\u7684\u5173\u8054\u5b57\u6bb5\u5982\u4e0b\u6240\u793a:"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{alt:"\u56fe19-\u5173\u8054\u5173\u7cfb",src:s(7999).Z+"",width:"1544",height:"892"})}),"\n",(0,i.jsx)(e.h2,{id:"\u5173\u8054article\u6a21\u578b",children:"\u5173\u8054Article\u6a21\u578b"}),"\n",(0,i.jsx)(e.p,{children:"\u4e00\u4e2a\u7528\u6237\u53ef\u4ee5\u5199\u591a\u7bc7\u6587\u7ae0\uff0c\u6240\u4ee5User\u6a21\u578b\u548cArticle\u6a21\u578b\u662f\u4e00\u5bf9\u591a\u5173\u7cfb\u3002\n\u63a5\u4e0b\u6765\u6211\u4eec\u518d\u6765\u4e00\u4e2a\u6587\u7ae0Article\u6a21\u578b\uff0c\u653e\u5728app01\u8fd9\u4e2a\u5e94\u7528\u4e0b\u4e86\u3002\u4ee3\u7801\u5982\u4e0b\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-python",metastring:"title='demo/app01/models.py'",children:"from django.db import models\nfrom account.models import User\n\n\nclass Article(model):\n    id = models.AutoField(primary_key=True)\n    title = models.CharField(max_length=120)\n    slug = models.CharField(max_length=200, default='')\n    content = models.TextField()\n    publish_date = models.DateTimeField()\n    user = models.ForeignKey(User, on_delete=models.CASCADE)\n"})}),"\n",(0,i.jsxs)(e.admonition,{title:"\u4ee3\u7801\u89e3\u6790",type:"info",children:[(0,i.jsx)(e.p,{children:"\u8fd9\u6bb5\u4ee3\u7801\u5b9a\u4e49\u4e86\u4e00\u4e2aArticle\u6a21\u578b,\u4e3b\u8981\u529f\u80fd\u5982\u4e0b:"}),(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u4ecedjango.db\u5bfc\u5165models\u6a21\u5757"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u4eceaccount\u5e94\u7528\u5bfc\u5165User\u6a21\u578b"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5b9a\u4e49Article\u6a21\u578b,\u5305\u542b\u4ee5\u4e0b\u5b57\u6bb5:"}),"\n"]}),"\n"]}),(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"id - \u81ea\u589e\u4e3b\u952e"}),"\n",(0,i.jsx)(e.li,{children:"title - \u6587\u7ae0\u6807\u9898"}),"\n",(0,i.jsx)(e.li,{children:"slug - \u6587\u7ae0\u522b\u540d"}),"\n",(0,i.jsx)(e.li,{children:"content - \u6587\u7ae0\u5185\u5bb9"}),"\n",(0,i.jsx)(e.li,{children:"publish_date - \u53d1\u5e03\u65f6\u95f4"}),"\n",(0,i.jsx)(e.li,{children:"user - \u5916\u952e,\u5173\u8054\u7684User,CASCADE\u8868\u793a\u7ea7\u8054\u5220\u9664, \u5982\u679c\u7528\u6237\u5220\u9664\uff0c\u8be5\u6587\u7ae0\u4f1a\u4e00\u8d77\u5220\u9664"}),"\n"]}),(0,i.jsxs)(e.ol,{start:"4",children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"title\u3001slug\u3001content\u4e3a\u6587\u7ae0\u7684\u57fa\u672c\u4fe1\u606f"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"publish_date\u8bb0\u5f55\u53d1\u5e03\u65f6\u95f4"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"user\u5916\u952e\u5173\u8054\u4e86account\u5e94\u7528\u7684User\u6a21\u578b,\u7528\u4e8e\u8bb0\u5f55\u6587\u7ae0\u4f5c\u8005"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"on_delete=models.CASCADE\u8868\u793a\u5220\u9664\u7528\u6237\u65f6,\u8be5\u7528\u6237\u7684\u6240\u6709\u6587\u7ae0\u4e5f\u4f1a\u88ab\u5220\u9664"}),"\n"]}),"\n"]})]}),"\n",(0,i.jsx)(e.h2,{id:"\u6267\u884c\u6570\u636e\u8fc1\u79fb",children:"\u6267\u884c\u6570\u636e\u8fc1\u79fb"}),"\n",(0,i.jsx)(e.p,{children:"\u73b0\u5728\u5c31\u521b\u5efa\u4e86\u4e24\u4e2a\u6a21\u578b: User\u548cArticle\u3002\u4ed6\u4eec\u4e4b\u95f4\u662f\u4e00\u5bf9\u591a\u7684\u5173\u7cfb\u3002\n\u521b\u5efa\u597d\u4e86\u7c7b\u4ee5\u540e\uff0c\u6211\u4eec\u9700\u8981\u628a\u5b83\u63d0\u4ea4\u5230\u6570\u636e\u5e93\u4e0a\uff0c\n\u90a3\u8fd9\u4e2a\u65f6\u5019\u5462\uff0c\u54b1\u4eec\u5c31\u53ef\u4ee5\u4f7f\u7528\u6570\u636e\u8fc1\u79fb\u4e86\u3002\n\u597d\u770b\u4e00\u4e0b\u6267\u884c\u6570\u636e\u5e93\u8fc1\u79fb\uff0c\n\u54b1\u4eec\u9996\u5148\u6765\u751f\u6210\u8fc1\u79fb\u6587\u4ef6,\u5148\u6267\u884c\u5982\u4e0b\u547d\u4ee4:"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"python manage.py makemigrations\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u6267\u884c\u5b8c\u6bd5\u540e\uff0c\u5728\u5bf9\u5e94\u7684\u5e94\u7528\u4e0b\u5c31\u4f1a\u751f\u6210\u4e00\u4e2amigrations\u6587\u4ef6\u5939\uff0c\u4e0b\u9762\u5c31\u4f1a\u6709\u4e00\u4e2a\u540d\u4e3a0000*\u6587\u4ef6\u3002\n\u7136\u540e\u518d\u53bb\u6267\u884c\u4e0b\u9762\u7684\u547d\u4ee4, \u7528\u4e8e\u6267\u884c\u8fc1\u79fb,\u5c06\u6700\u65b0\u7684\u6a21\u578b\u7ed3\u6784\u540c\u6b65\u5230\u6570\u636e\u5e93\u4e2d:"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"python manage.py migrate\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u6267\u884c\u5b8c\u6210\u540e\uff0c\u53d1\u73b0\u6211\u4eec\u7684django_demo\u6570\u636e\u5e93\u4e2d,\u5c31\u4f1a\u65b0\u589e2\u5f20\u8868\u3002"}),"\n",(0,i.jsxs)(e.admonition,{title:"\u603b\u7ed3",type:"info",children:[(0,i.jsx)(e.p,{children:"makemigrations:\u751f\u6210\u8fc1\u79fb\u6587\u4ef6,\u8bb0\u5f55\u6a21\u578b\u53d8\u66f4\u3002"}),(0,i.jsx)(e.p,{children:"migrate:\u6267\u884c\u6240\u6709\u672a\u5e94\u7528\u7684\u8fc1\u79fb,\u5b8c\u6210\u540c\u6b65\u3002"}),(0,i.jsx)(e.p,{children:"\u4e24\u8005\u914d\u5408\u4f7f\u7528\u53ef\u4ee5\u5728\u6a21\u578b\u53d1\u751f\u53d8\u5316\u65f6\u81ea\u52a8\u5c06\u53d8\u5316\u5e94\u7528\u5230\u6570\u636e\u5e93,\u5b9e\u73b0\u6a21\u578b\u548c\u6570\u636e\u5e93\u7684\u540c\u6b65\u7ba1\u7406\u3002\n\u6240\u4ee5\u5728\u6a21\u578b\u6709\u4efb\u4f55\u4fee\u6539\u540e,\u90fd\u9700\u8981\u4f9d\u6b21\u8fd0\u884c\u8fd9\u4e24\u4e2a\u547d\u4ee4\u3002"})]}),"\n",(0,i.jsxs)(e.p,{children:["\u6700\u7ec8\u5c06\u6211\u4eec\u6a21\u578b\u7c7b\u4e2d\u7684\u8868\u4ee5\u53ca\u5b57\u6bb5,\n\u5168\u90e8\u521b\u5efa\u5230\u6211\u4eec\u7684\u6570\u636e\u5e93\u4e2d\u4e86.\n\u4e0d\u9700\u8981\u6211\u4eec\u4f7f\u7528SQL\u547d\u4ee4,\n\u5c31\u53ef\u4ee5\u5b9e\u73b0\u4e86\u3002\n\u5982\u4e0b\u56fe\u6240\u793a\u3002\n",(0,i.jsx)(e.img,{alt:"\u56fe19-\u751f\u62102\u5f20\u8868",src:s(4506).Z+"",width:"1638",height:"808"})]}),"\n",(0,i.jsx)(e.p,{children:"\u597d\u672c\u8282\u6211\u4eec\u5148\u4ecb\u7ecd\u5230\u8fd9\u91cc\uff0c\n\u5c0f\u4f19\u4f34\u4eec\uff0c\u6211\u4eec\u4e0b\u8282\u518d\u89c1\u3002"})]})}function h(n={}){const{wrapper:e}={...(0,l.a)(),...n.components};return e?(0,i.jsx)(e,{...n,children:(0,i.jsx)(a,{...n})}):a(n)}},7999:(n,e,s)=>{s.d(e,{Z:()=>i});const i=s.p+"assets/images/\u56fe19-\u5173\u8054\u5173\u7cfb-c80c82053fb83c77e750d6b9bc4fc0bf.png"},2474:(n,e,s)=>{s.d(e,{Z:()=>i});const i=s.p+"assets/images/\u56fe19-\u5e38\u7528\u5b57\u6bb5\u7c7b\u578b-39c82fe8a0edee9960e1ca525b1612a7.png"},4506:(n,e,s)=>{s.d(e,{Z:()=>i});const i=s.p+"assets/images/\u56fe19-\u751f\u62102\u5f20\u8868-51e894c57d35f246785d9fdea6adf125.png"},1151:(n,e,s)=>{s.d(e,{Z:()=>t,a:()=>d});var i=s(7294);const l={},r=i.createContext(l);function d(n){const e=i.useContext(r);return i.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function t(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(l):n.components||l:d(n.components),i.createElement(r.Provider,{value:e},n.children)}}}]);