"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[5923],{978:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>t,default:()=>m,frontMatter:()=>r,metadata:()=>i,toc:()=>o});var l=s(5893),a=s(1151);const r={},t="[\u6a21\u578b]:\u8bbe\u7f6eMeta\u5143\u6570\u636e",i={id:"Django\u57fa\u7840\u6559\u7a0b/\u8bbe\u7f6emeta\u539f\u6570\u636e",title:"[\u6a21\u578b]:\u8bbe\u7f6eMeta\u5143\u6570\u636e",description:"\u5728\u4e0a\u4e00\u8282\u8bfe\u7a0b\u4e2d\u6211\u4eec\u521b\u5efa\u4e86\u6a21\u578b\u7c7b\uff0c",source:"@site/docs/Django\u57fa\u7840\u6559\u7a0b/20.\u8bbe\u7f6emeta\u539f\u6570\u636e.md",sourceDirName:"Django\u57fa\u7840\u6559\u7a0b",slug:"/Django\u57fa\u7840\u6559\u7a0b/\u8bbe\u7f6emeta\u539f\u6570\u636e",permalink:"/docs/Django\u57fa\u7840\u6559\u7a0b/\u8bbe\u7f6emeta\u539f\u6570\u636e",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Django\u57fa\u7840\u6559\u7a0b/20.\u8bbe\u7f6emeta\u539f\u6570\u636e.md",tags:[],version:"current",sidebarPosition:20,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"[\u6a21\u578b]:\u521b\u5efa\u6a21\u578b",permalink:"/docs/Django\u57fa\u7840\u6559\u7a0b/\u521b\u5efa\u6a21\u578b"},next:{title:"[\u6a21\u578b]:ORM\u65b0\u589e\u6570\u636e",permalink:"/docs/Django\u57fa\u7840\u6559\u7a0b/ORM\u65b0\u589e\u6570\u636e"}},d={},o=[{value:"\u6a21\u578b\u4e2d\u8bbe\u7f6eMeta",id:"\u6a21\u578b\u4e2d\u8bbe\u7f6emeta",level:2},{value:"\u8bbe\u7f6e\u5171\u7528\u7c7b",id:"\u8bbe\u7f6e\u5171\u7528\u7c7b",level:2}];function c(e){const n={admonition:"admonition",code:"code",h1:"h1",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,a.a)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.h1,{id:"\u6a21\u578b\u8bbe\u7f6emeta\u5143\u6570\u636e",children:"[\u6a21\u578b]:\u8bbe\u7f6eMeta\u5143\u6570\u636e"}),"\n",(0,l.jsx)(n.p,{children:"\u5728\u4e0a\u4e00\u8282\u8bfe\u7a0b\u4e2d\u6211\u4eec\u521b\u5efa\u4e86\u6a21\u578b\u7c7b\uff0c\n\u521b\u5efa\u4e86\u4e00\u4e2auser\uff0c\u4e5f\u521b\u5efa\u4e86\u4e00\u4e2aarticle\u3002\n\u4f46\u662f\u5b83\u90fd\u662f\u4f7f\u7528\u9ed8\u8ba4\u7684\u5f62\u5f0f\uff0c\n\u6bd4\u5982\u8bf4\u8fd9\u91cc\u7684\u6570\u636e\u5e93\u7684\u540d\u79f0\uff0c\u9ed8\u8ba4\u5c31\u662f'\u5e94\u7528_\u7c7b\u540d'\u3002"}),"\n",(0,l.jsx)(n.p,{children:"\u5f88\u591a\u65f6\u5019\u5462\uff0c\u6211\u4eec\u9700\u8981\u5bf9\u5b83\u8fdb\u884c\u4e00\u4e9b\u5355\u72ec\u7684\u914d\u7f6e,\n\u4f60\u6bd4\u5982\u8bf4\u8fd9\u4e2a\u540d\u5b57\u5462\uff0c\u6211\u60f3\u7ed9\u5b83\u81ea\u5df1\u5b9a\u4e00\u4e2a\u540d\u5b57,\n\u800c\u4e0d\u662f\u4f7f\u7528\u8fd9\u91cc\u7684app01_article\u8fd9\u6837\u7684\u540d\u5b57,\n\u8fd9\u65f6\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u4f7f\u7528\u6a21\u578b\u7684\u5143\u6570\u636e\u6765\u89e3\u51b3\u3002"}),"\n",(0,l.jsx)(n.h2,{id:"\u6a21\u578b\u4e2d\u8bbe\u7f6emeta",children:"\u6a21\u578b\u4e2d\u8bbe\u7f6eMeta"}),"\n",(0,l.jsx)(n.p,{children:"Article\u4e2d\u8bbe\u7f6eMeta, \u4ee3\u7801\u5982\u4e0b\uff1a"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",metastring:"title='demo/app01/models.py'",children:"\nclass Article(Model):\n    id = models.IntegerField(primary_key=True)\n    title = models.CharField(max_length=120)\n    slug = models.CharField(max_length=200, default='')\n    content = models.TextField()\n    publish_date = models.DateTimeField()\n    user = models.ForeignKey(User, on_delete=models.CASCADE)\n\n    class Meta:\n        db_table = 'article'\n        verbose_name = '\u6587\u7ae0\u4fe1\u606f'\n        verbose_name_plural = '\u6587\u7ae0\u4fe1\u606f'\n        ordering = ['-publish_date']\n"})}),"\n",(0,l.jsxs)(n.admonition,{title:"\u4ee3\u7801\u89e3\u6790",type:"info",children:[(0,l.jsx)(n.p,{children:"\u5728Meta\u5185\u90e8\u7c7b\u4e2d\u53ef\u4ee5\u914d\u7f6e\u4e00\u4e9b\u6a21\u578b\u7684\u5143\u4fe1\u606f:"}),(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"db_table: \u5728\u6570\u636e\u5e93\u4e2d\u7684\u8868\u540d,\u5982\u679c\u4e0d\u8bbe\u7f6e\u5c06\u4f7f\u7528app\u540d_\u6a21\u578b\u7c7b\u540d\u7684\u683c\u5f0f\u3002"}),"\n",(0,l.jsx)(n.li,{children:"verbose_name\u3001verbose_name_plural: \u6a21\u578b\u7684\u5355\u6570\u548c\u590d\u6570\u540d\u79f0,\u7528\u4e8e\u663e\u793a\u5728Admin\u7ad9\u70b9\u7b49\u3002"}),"\n",(0,l.jsx)(n.li,{children:"ordering: \u5bf9\u67e5\u8be2\u7ed3\u679c\u6392\u5e8f\u7684\u9ed8\u8ba4\u5b57\u6bb5,\u8d1f\u53f7\u8868\u793a\u964d\u5e8f\u3002"}),"\n"]})]}),"\n",(0,l.jsx)(n.p,{children:"User\u4e2d\u8bbe\u7f6eMeta, \u4ee3\u7801\u5982\u4e0b\uff1a"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",metastring:"title='demo/account/models.py'",children:"class User(Model):\n    id = models.AutoField(primary_key=True) \n    username = models.CharField('\u7528\u6237\u540d', max_length=30,null=True,blank=True,unique=True)\n    password = models.CharField('\u5bc6\u7801',max_length=30)\n    email = models.EmailField('\u90ae\u7bb1', null=True,blank=True, unique=True)\n\n    class Meta:\n        db_table = 'user'\n        verbose_name = '\u7528\u6237\u4fe1\u606f'\n        verbose_name_plural = '\u7528\u6237\u4fe1\u606f'\n"})}),"\n",(0,l.jsx)(n.p,{children:"\u6267\u884c\u6570\u636e\u8fc1\u79fb\u64cd\u4f5c:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"python manage.py makemigrations\n\npython manage.py migrate\n"})}),"\n",(0,l.jsx)(n.p,{children:"\u6b64\u65f6\uff0c\u67e5\u770b\u6570\u636e\u5e93\u4e2d\u76842\u5f20\u8868\uff0c\u5df2\u7ecf\u53d8\u6210article\u548cuser\u4e86\u3002"}),"\n",(0,l.jsx)(n.h2,{id:"\u8bbe\u7f6e\u5171\u7528\u7c7b",children:"\u8bbe\u7f6e\u5171\u7528\u7c7b"}),"\n",(0,l.jsx)(n.p,{children:"\u90a3\u9664\u6b64\u4e4b\u5916\u5462\uff0c\u5143\u6570\u636e\u8fd8\u6709\u4e00\u4e9b\u5176\u5b83\u7684\u5e94\u7528\u3002\u6bd4\u5982\u8bf4\n\u5f53\u524d\u7684User\u8868\u548cArticle\u8868\u90fd\u6709\u4e00\u4e9b\u516c\u7528\u7684\u5b57\u6bb5\u3002\n\u4f8b\u5982\u521b\u5efa\u65f6\u95f4\u3001\u4fee\u6539\u65f6\u95f4\uff0c\u8fd9\u4e9b\u5b57\u6bb5\u6bcf\u4e2a\u8868\u90fd\u53ef\u4ee5\u7528\uff0c\n\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u521b\u5efa\u4e00\u4e2a\u516c\u7528\u7684\u7c7b\uff0c\u5c31\u53eb\u505aBaseModel\u3002\n\u7136\u540e\u8ba9\u5b83\u6765\u7ee7\u627f\u8fd9\u91cc\u7684Django\u4e2d\u7684Model\u3002"}),"\n",(0,l.jsx)(n.p,{children:"\u5728demo\u6839\u76ee\u5f55\u4e0b\uff0c\u521b\u5efa\u4e00\u4e2autils\u6587\u4ef6\u5939\uff0c\u5728\u5b83\u4e0b\u521b\u5efa\u4e00\u4e2a\u53eb\u505abasemodels.py\u7684\u6587\u4ef6\uff0c\u4ee3\u7801\u5982\u4e0b\uff1a"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",metastring:"title='demo/utils/basemodels.py'",children:"from django.db import models\n\nclass BaseModel(models.Model):\n    created_at = models.DateTimeField('\u521b\u5efa\u65f6\u95f4', auto_now_add=True, editable=True)\n    updated_at = models.DateTimeField('\u66f4\u65b0\u65f6\u95f4', auto_now=True, editable=True)\n\n    class Meta:\n        abstract = True\n"})}),"\n",(0,l.jsxs)(n.admonition,{title:"\u4ee3\u7801\u89e3\u6790",type:"info",children:[(0,l.jsx)(n.p,{children:"\u8fd9\u6bb5\u4ee3\u7801\u5b9a\u4e49\u4e86\u4e00\u4e2a\u62bd\u8c61\u57fa\u7c7bBaseModel,\u4e3b\u8981\u529f\u80fd\u662f:"}),(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"\u4ecedjango.db\u5bfc\u5165models"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"\u5b9a\u4e49BaseModel\u7ee7\u627f\u81eamodels.Model"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"\u521b\u5efa\u65f6\u95f4created_at\u5b57\u6bb5,\u5728\u5b9e\u4f8b\u7b2c\u4e00\u6b21\u4fdd\u5b58\u65f6\u4f1a\u81ea\u52a8\u5199\u5165\u5f53\u524d\u65f6\u95f4,\u53ef\u7f16\u8f91"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"\u66f4\u65b0\u65f6\u95f4updated_at\u5b57\u6bb5,\u6bcf\u6b21\u4fdd\u5b58\u5bf9\u8c61\u65f6\u81ea\u52a8\u5199\u5165\u5f53\u524d\u65f6\u95f4,\u53ef\u7f16\u8f91"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"\u5728Meta\u5185\u90e8\u7c7b\u4e2d\u8bbe\u7f6eabstract=True,\u8868\u793a\u8fd9\u662f\u4e00\u4e2a\u62bd\u8c61\u57fa\u7c7b\u4e0d\u4f1a\u521b\u5efa\u8868"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"\u5176\u4ed6\u6a21\u578b\u53ef\u4ee5\u7ee7\u627f\u8fd9\u4e2aBaseModel,\u5c31\u62e5\u6709\u4e86created_at\u548cupdated_at\u5b57\u6bb5,\u4ee5\u53ca\u81ea\u52a8\u7ba1\u7406\u8fd9\u4e24\u4e2a\u65f6\u95f4\u5b57\u6bb5\u7684\u529f\u80fd"}),"\n"]}),"\n"]}),(0,l.jsx)(n.p,{children:"\u603b\u7ed3:"}),(0,l.jsx)(n.p,{children:"\u8fd9\u662f\u4e00\u4e2a\u62bd\u8c61\u57fa\u7c7b,\u901a\u8fc7\u7ee7\u627f\u53ef\u4ee5\u7ed9\u5176\u4ed6\u6a21\u578b\u6dfb\u52a0\u521b\u5efa\u65f6\u95f4\u548c\u66f4\u65b0\u65f6\u95f4\u5b57\u6bb5,\u4ee5\u53ca\u81ea\u52a8\u7ba1\u7406\u8fd9\u4e24\u4e2a\u65f6\u95f4\u7684\u65b9\u6cd5\u3002"}),(0,l.jsx)(n.p,{children:"\u8bbe\u7f6eabstract=True\u8868\u793a\u5176\u4ec5\u7528\u4e8e\u7ee7\u627f,\u4e0d\u4f1a\u5355\u72ec\u521b\u5efa\u6570\u636e\u5e93\u8868\u3002"})]}),"\n",(0,l.jsx)(n.p,{children:"BaseModel\u7236\u7c7b\u521b\u5efa\u5b8c\u6210\u540e\uff0c\u5c31\u53ef\u4ee5\u8ba9User\u548cArticle \u8fd92\u4e2a\u5b50\u7c7b\u6765\u7ee7\u627f\u5b83\u4e86\u3002\nArticle \u6a21\u578b\u4ee3\u7801\u5982\u4e0b\uff1a"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",metastring:"title='demo/app01/models.py'",children:"\nfrom utils.basemodels import BaseModel # \u5bfc\u5165\u7236\u7c7b\n\nclass Article(BaseModel):  # \u4fee\u6539\u7ee7\u627f\u7236\u7c7b\n    id = models.IntegerField(primary_key=True)\n    ....\n\n"})}),"\n",(0,l.jsx)(n.p,{children:"User\u6a21\u578b\u4ee3\u7801\u5982\u4e0b\uff1a"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",metastring:"title='demo/account/models.py'",children:"\nfrom utils.basemodels import BaseModel  # \u5bfc\u5165\u7236\u7c7b\n\nclass User(BaseModel):  # \u4fee\u6539\u7ee7\u627f\u7236\u7c7b\n    id = models.IntegerField(primary_key=True)\n    ....\n\n"})}),"\n",(0,l.jsx)(n.p,{children:"\u63a5\u4e0b\u6765\u6211\u4eec\u518d\u6765\u751f\u6210\u8fd9\u4e2a\u8fc1\u79fb\u6587\u4ef6\u3002\u547d\u4ee4\u5982\u4e0b\uff1a"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"python manage.py make migrations\n"})}),"\n",(0,l.jsx)(n.admonition,{type:"warning",children:(0,l.jsx)(n.p,{children:"\u8fd9\u91cc\u7531\u4e8e\u6211\u4eec\u6dfb\u52a0\u4e86\u4e24\u4e2a\u5b57\u6bb5\uff0c\u4e00\u4e2a\u662f\u521b\u5efa\u65f6\u95f4\uff0c\u4e00\u4e2a\u662f\u66f4\u6539\u65f6\u95f4\u3002\u5b83\u4eec\u662f\u81ea\u52a8\u751f\u6210\u7684\uff0c\n\u6267\u884c\u65f6\uff0c\u5b83\u63d0\u793a\u662f\u5426\u9700\u8981\u8bbe\u7f6e\u9ed8\u8ba4\u503c\u3002\u6211\u4eec\u9700\u8981\u9009\u62e91\uff0c \u7136\u540e\u9ed8\u8ba4\u503ctime\uff0c\u6309\u4e0b\u56de\u8f66\u952e\u3002"})}),"\n",(0,l.jsx)(n.p,{children:"\u521b\u5efa\u5b8c\u8fc1\u79fb\u6587\u4ef6\u4ee5\u540e\uff0c\u63a5\u4e0b\u6765\u54b1\u4eec\u6267\u884c\u8fc1\u79fb\u547d\u4ee4\u3002\n\u4f7f\u7528\u5982\u4e0b\u547d\u4ee4:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"python manage.py migrate \n"})}),"\n",(0,l.jsx)(n.p,{children:"\u518d\u6b21\u67e5\u770b\u6570\u636e\u5e93\u4e2d\u7684user\u548carticel, \u8fd9\u91cc\u65b0\u589e\u4e86\u4e24\u4e2a\u5b57\u6bb5\n\u521b\u5efa\u65f6\u95f4\u548c\u66f4\u65b0\u65f6\u95f4\u3002\n\u90a3\u4e48\u6211\u4eec\u518d\u770b\u4e00\u4e0b\uff0c\u5728\u6574\u4e2a\u8868\u4e2d\u5e76\u6ca1\u6709\u521b\u5efa\u4e00\u4e2a\u53eb\u505abase model\u7684\u8868\u3002\n\u8fd9\u662f\u56e0\u4e3a\u6211\u4eec\u5728\u5143\u6570\u636e\u8fd9\u91cc\u8bbe\u7f6e\u4e86\u5b83\u662f\u4e00\u4e2a\u62bd\u8c61\u7684\u7c7b\u3002"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",metastring:"title='demo/utils/basemodels.py'",children:"    class Meta:\n        abstract = True\n"})}),"\n",(0,l.jsx)(n.p,{children:"\u6240\u4ee5\u5b83\u5e76\u4e0d\u4f1a\u521b\u5efa\u8fd9\u6837\u7684\u8868\u3002"}),"\n",(0,l.jsx)(n.p,{children:"\u5c0f\u4f19\u4f34\u4eec\u6211\u4eec\u4e0b\u8282\u518d\u89c1\u3002"})]})}function m(e={}){const{wrapper:n}={...(0,a.a)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(c,{...e})}):c(e)}},1151:(e,n,s)=>{s.d(n,{Z:()=>i,a:()=>t});var l=s(7294);const a={},r=l.createContext(a);function t(e){const n=l.useContext(r);return l.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:t(e.components),l.createElement(r.Provider,{value:n},e.children)}}}]);