"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[7729],{8737:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>o,contentTitle:()=>s,default:()=>f,frontMatter:()=>r,metadata:()=>l,toc:()=>c});var a=t(5893),i=t(1151);const r={},s="\u8be6\u60c5\u9875\u529f\u80fd\u5b9e\u73b0",l={id:"Flask\u9879\u76ee:\u7f51\u6613\u4e91\u8bfe\u5802\u8bfe\u7a0b\u5206\u6790/\u8be6\u60c5\u9875\u529f\u80fd\u5b9e\u73b0",title:"\u8be6\u60c5\u9875\u529f\u80fd\u5b9e\u73b0",description:"\u76ee\u5f55\u7ed3\u6784\u5982\u4e0b\uff1a",source:"@site/docs/Flask\u9879\u76ee:\u7f51\u6613\u4e91\u8bfe\u5802\u8bfe\u7a0b\u5206\u6790/6.\u8be6\u60c5\u9875\u529f\u80fd\u5b9e\u73b0.md",sourceDirName:"Flask\u9879\u76ee:\u7f51\u6613\u4e91\u8bfe\u5802\u8bfe\u7a0b\u5206\u6790",slug:"/Flask\u9879\u76ee:\u7f51\u6613\u4e91\u8bfe\u5802\u8bfe\u7a0b\u5206\u6790/\u8be6\u60c5\u9875\u529f\u80fd\u5b9e\u73b0",permalink:"/docs/Flask\u9879\u76ee:\u7f51\u6613\u4e91\u8bfe\u5802\u8bfe\u7a0b\u5206\u6790/\u8be6\u60c5\u9875\u529f\u80fd\u5b9e\u73b0",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:6,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"\u9996\u9875\u529f\u80fd\u5b9e\u73b0",permalink:"/docs/Flask\u9879\u76ee:\u7f51\u6613\u4e91\u8bfe\u5802\u8bfe\u7a0b\u5206\u6790/\u9996\u9875\u529f\u80fd\u5b9e\u73b0"},next:{title:"\u5168\u90e8\u8bfe\u7a0b\u5206\u9875\u9875\u9762\u5b9e\u73b0",permalink:"/docs/Flask\u9879\u76ee:\u7f51\u6613\u4e91\u8bfe\u5802\u8bfe\u7a0b\u5206\u6790/\u5168\u90e8\u8bfe\u7a0b\u83b7\u53d6\u5206\u9875\u6570"}},o={},c=[{value:"\u8be6\u60c5\u9875\u83b7\u53d6\u8bfe\u7a0b\u4fe1\u606f",id:"\u8be6\u60c5\u9875\u83b7\u53d6\u8bfe\u7a0b\u4fe1\u606f",level:2},{value:"Echarts\u57fa\u672c\u4f7f\u7528",id:"echarts\u57fa\u672c\u4f7f\u7528",level:2},{value:"\u8be6\u60c5\u9875\u6298\u7ebf\u56feTab\u680f\u5207\u6362",id:"\u8be6\u60c5\u9875\u6298\u7ebf\u56fetab\u680f\u5207\u6362",level:2},{value:"\u8be6\u60c5\u9875\u6298\u7ebf\u56feAjax\u5f02\u6b65\u52a0\u8f7d",id:"\u8be6\u60c5\u9875\u6298\u7ebf\u56feajax\u5f02\u6b65\u52a0\u8f7d",level:2},{value:"\u8be6\u60c5\u9875\u6298\u7ebf\u56fe\u4e2d\u4e09\u79cd\u7c7b\u578b\u65f6\u95f4\u67e5\u8be2\u7684SQL\u8bed\u53e5",id:"\u8be6\u60c5\u9875\u6298\u7ebf\u56fe\u4e2d\u4e09\u79cd\u7c7b\u578b\u65f6\u95f4\u67e5\u8be2\u7684sql\u8bed\u53e5",level:2},{value:"\u83b7\u53d6\u6298\u7ebf\u56fe\u4e2d\u9500\u91cf\u6570\u636e",id:"\u83b7\u53d6\u6298\u7ebf\u56fe\u4e2d\u9500\u91cf\u6570\u636e",level:2}];function d(n){const e={a:"a",code:"code",h1:"h1",h2:"h2",p:"p",pre:"pre",...(0,i.a)(),...n.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(e.h1,{id:"\u8be6\u60c5\u9875\u529f\u80fd\u5b9e\u73b0",children:"\u8be6\u60c5\u9875\u529f\u80fd\u5b9e\u73b0"}),"\n",(0,a.jsx)(e.p,{children:"\u76ee\u5f55\u7ed3\u6784\u5982\u4e0b\uff1a"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{children:"\u251c\u2500\u2500 app\n\u2502\xa0\xa0 \u251c\u2500\u2500 __init__.py\n\u2502\xa0\xa0 \u251c\u2500\u2500 models.py\n\u2502\xa0\xa0 \u251c\u2500\u2500 routes.py\n\u2502\xa0\xa0 \u2514\u2500\u2500 templates\n\u2502\xa0\xa0 \u2502   \u251c\u2500\u2500 base.html\n\u2502\xa0\xa0 \u2502   \u251c\u2500\u2500 about.html\n\u2502\xa0\xa0 \u2502   \u251c\u2500\u2500 index.html\n\u2502\xa0\xa0 \u2502   \u251c\u2500\u2500 detail.html (\u65b0\u589e)\n\u2502\xa0\xa0 \u251c\u2500\u2500 static\n\u2502\xa0\xa0 \u2502\xa0\xa0 \u251c\u2500\u2500 css\n\u2502\xa0\xa0 \u2502\xa0\xa0 \u251c\u2500\u2500 images\n\u2502\xa0\xa0 \u2502\xa0\xa0 \u2514\u2500\u2500 js\n\u251c\u2500\u2500 manage.py\n\u251c\u2500\u2500 migrations\n\u2514\u2500\u2500 venv\n"})}),"\n",(0,a.jsx)(e.h2,{id:"\u8be6\u60c5\u9875\u83b7\u53d6\u8bfe\u7a0b\u4fe1\u606f",children:"\u8be6\u60c5\u9875\u83b7\u53d6\u8bfe\u7a0b\u4fe1\u606f"}),"\n",(0,a.jsx)(e.p,{children:"routes.py\u4ee3\u7801\u5982\u4e0b\uff1a"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-python",children:"@app.route('/course/<course_id>')\ndef detail(course_id):\n    course = Course.query.filter_by(course_id=course_id).first()\n    return render_template('detail.html',course=course)\n"})}),"\n",(0,a.jsx)(e.p,{children:"detail.html\u6a21\u677f\u4ee3\u7801\u5982\u4e0b\uff1a"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-html",children:'{% extends \'base.html\' %}\n\n{% block content%}\n\n<div class="container">\n    <div class="row" style="margin:20px auto;">\n        <div class="col-sm-6">\n            <img src="{{ course.big_img_url }}" class="card-img-top"\n                 alt="..." width="450px" height="260px">\n        </div>\n        <div class="col-sm-6">\n            <h4>{{ course.product_name }}</h4>\n            <div class="course-info">\u8bfe\u7a0b\u8bb2\u5e08\uff1a{{ course.lector_name }}</div>\n            <div class="course-info">\u6240\u5c5e\u673a\u6784\uff1a{{ course.provider }}</div>\n            <div class="course-info">\u8bfe\u7a0b\u8bc4\u5206\uff1a{{ course.score }}</div>\n            <div class="course-info">\u5b66\u4e60\u4eba\u6570\uff1a{{ course.learner_count}}</div>\n            <div class="course-price">\n                {% if course.discount_price %}\n                    \uffe5{{course.discount_price}}\n                    <span style="color: #666666;font-size: 14px;text-decoration: line-through;">\uffe5{{course.original_price}}</span>\n                {% elif not course.original_price  %}\n                    \u514d\u8d39\n                {% else %}\n                    \uffe5{{course.original_price}}\n                {% endif %}\n            </div>\n        </div>\n    </div>\n    <div class="col-sm">\n    <ul class="nav nav-tabs" id="myTab" role="tablist">\n      <li class="nav-item">\n        <a class="nav-link active" id="home-tab" data-toggle="tab" href="#home" role="tab" aria-controls="\u8bfe\u7a0b\u4ecb\u7ecd" aria-selected="true">\u8bfe\u7a0b\u4ecb\u7ecd</a>\n      </li>\n      <li class="nav-item">\n        <a class="nav-link" id="week-tab" data-toggle="tab" href="#week" role="tab" aria-controls="\u672c\u5468\u9500\u91cf" aria-selected="false">\u6700\u8fd1\u4e00\u5468\u9500\u91cf</a>\n      </li>\n      <li class="nav-item">\n        <a class="nav-link" id="month-tab" data-toggle="tab" href="#month" role="tab" aria-controls="\u672c\u6708\u9500\u91cf" aria-selected="true">\u6700\u8fd1\u4e00\u4e2a\u6708\u9500\u91cf</a>\n      </li>\n      <li class="nav-item">\n        <a class="nav-link" id="year-tab" data-toggle="tab" href="#year" role="tab" aria-controls="\u5e74\u5ea6\u9500\u91cf" aria-selected="false">\u6bcf\u6708\u9500\u91cf</a>\n      </li>\n    </ul>\n    <div class="tab-content" id="myTabContent" style="min-height:260px;padding:20px;background:#fbfbfb;">\n      <div class="tab-pane fade show active" id="home" role="tabpanel" aria-labelledby="home-tab">\n          {% for line in course.description.splitlines() %}\n                {{ line }} <br>\n          {% endfor %}\n      </div>\n      <div class="tab-pane fade" id="week" role="tabpanel" aria-labelledby="week-tab">\n          <div id="sale-week" style="width: 1000px;height:400px;"></div>\n      </div>\n      <div class="tab-pane fade" id="month" role="tabpanel" aria-labelledby="month-tab">\n          <div id="sale-month" style="width: 1000px;height:400px;"></div>\n      </div>\n      <div class="tab-pane fade" id="year" role="tabpanel" aria-labelledby="year-tab">\n          <div id="sale-year" style="width: 1000px;height:400px;"></div>\n      </div>\n    </div>\n    </div>\n</div>\n\n{% endblock %}\n'})}),"\n",(0,a.jsx)(e.h2,{id:"echarts\u57fa\u672c\u4f7f\u7528",children:"Echarts\u57fa\u672c\u4f7f\u7528"}),"\n",(0,a.jsxs)(e.p,{children:["\u5b98\u65b9\u7f51\u5740\uff1a  ",(0,a.jsx)(e.a,{href:"https://echarts.apache.org/zh/index.html",children:"https://echarts.apache.org/zh/index.html"})]}),"\n",(0,a.jsxs)(e.p,{children:["\u6548\u679c\u793a\u4f8b\uff1a ",(0,a.jsx)(e.a,{href:"https://echarts.apache.org/examples/zh/index.html",children:"https://echarts.apache.org/examples/zh/index.html"})]}),"\n",(0,a.jsx)(e.p,{children:"\u65b0\u7248echarts\u4e0d\u518d\u63d0\u4f9b\u793e\u533a\u56fe\u5f62\u4e86\u3002"}),"\n",(0,a.jsx)(e.p,{children:"echarts\u57fa\u7840\u793a\u4f8bhtml\u4ee3\u7801\uff1a"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-html",children:"<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <title>Title</title>\n    <script src=\"https://cdn.bootcdn.net/ajax/libs/echarts/4.7.0/echarts-en.common.js\"><\/script>\n</head>\n<body>\n    \x3c!-- \u4e3a ECharts \u51c6\u5907\u4e00\u4e2a\u5b9a\u4e49\u4e86\u5bbd\u9ad8\u7684 DOM --\x3e\n    <div id=\"main\" style=\"width: 600px;height:400px;\"></div>\n    <script type=\"text/javascript\">\n      // \u57fa\u4e8e\u51c6\u5907\u597d\u7684dom\uff0c\u521d\u59cb\u5316echarts\u5b9e\u4f8b\n      var myChart = echarts.init(document.getElementById('main'));\n\n      // \u6307\u5b9a\u56fe\u8868\u7684\u914d\u7f6e\u9879\u548c\u6570\u636e\n      var option = {\n        title: {\n          text: 'ECharts \u5165\u95e8\u793a\u4f8b'\n        },\n        tooltip: {},\n        legend: {\n          data: ['\u9500\u91cf']\n        },\n        xAxis: {\n          data: ['\u886c\u886b', '\u7f8a\u6bdb\u886b', '\u96ea\u7eba\u886b', '\u88e4\u5b50', '\u9ad8\u8ddf\u978b', '\u889c\u5b50']\n        },\n        yAxis: {},\n        series: [\n          {\n            name: '\u9500\u91cf',\n            type: 'bar',\n            data: [5, 20, 36, 10, 10, 20]\n          }\n        ]\n      };\n\n      // \u4f7f\u7528\u521a\u6307\u5b9a\u7684\u914d\u7f6e\u9879\u548c\u6570\u636e\u663e\u793a\u56fe\u8868\u3002\n      myChart.setOption(option);\n    <\/script>\n  </body>\n</html>\n"})}),"\n",(0,a.jsx)(e.p,{children:"echarts\u6298\u7ebf\u56fe\u4ee3\u7801\uff1a"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-html",children:"<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <title>Title</title>\n    <script src=\"https://cdn.bootcdn.net/ajax/libs/echarts/4.7.0/echarts-en.common.js\"><\/script>\n</head>\n<body>\n    \x3c!-- \u4e3a ECharts \u51c6\u5907\u4e00\u4e2a\u5177\u5907\u5927\u5c0f\uff08\u5bbd\u9ad8\uff09\u7684 DOM --\x3e\n    <div id=\"main\" style=\"width: 600px;height:400px;\"></div>\n    <script type=\"text/javascript\">\n        // \u57fa\u4e8e\u51c6\u5907\u597d\u7684dom\uff0c\u521d\u59cb\u5316echarts\u5b9e\u4f8b\n        var myChart = echarts.init(document.getElementById('main'));\n\n        // \u6307\u5b9a\u56fe\u8868\u7684\u914d\u7f6e\u9879\u548c\u6570\u636e\n        option = {\n    backgroundColor: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{\n            offset: 0,\n            color: '#c86589'\n        },\n        {\n            offset: 1,\n            color: '#06a7ff'\n        }\n    ], false),\n    title: {\n        text: \"OCTOBER 2015\",\n        left: \"center\",\n        bottom: \"5%\",\n        textStyle: {\n            color: \"#fff\",\n            fontSize: 16\n        }\n    },\n    grid: {\n        top: '20%',\n        left: '10%',\n        right: '10%',\n        bottom: '15%',\n        containLabel: true,\n    },\n    xAxis: {\n        type: 'category',\n        boundaryGap: false,\n        data: ['14', '15', '16', '17', '18', '19', '20', '21', '22', '23'],\n        axisLabel: {\n            margin: 30,\n            color: '#ffffff63'\n        },\n        axisLine: {\n            show: false\n        },\n        axisTick: {\n            show: true,\n            length: 25,\n            lineStyle: {\n                color: \"#ffffff1f\"\n            }\n        },\n        splitLine: {\n            show: true,\n            lineStyle: {\n                color: '#ffffff1f'\n            }\n        }\n    },\n    yAxis: [{\n        type: 'value',\n        position: 'right',\n        axisLabel: {\n            margin: 20,\n            color: '#ffffff63'\n        },\n\n        axisTick: {\n            show: true,\n            length: 15,\n            lineStyle: {\n                color: \"#ffffff1f\",\n            }\n        },\n        splitLine: {\n            show: true,\n            lineStyle: {\n                color: '#ffffff1f'\n            }\n        },\n        axisLine: {\n            lineStyle: {\n                color: '#fff',\n                width: 2\n            }\n        }\n    }],\n    series: [{\n        name: '\u6ce8\u518c\u603b\u91cf',\n        type: 'line',\n        smooth: true, //\u662f\u5426\u5e73\u6ed1\u66f2\u7ebf\u663e\u793a\n        showAllSymbol: true,\n        symbol: 'circle',\n        symbolSize: 6,\n        lineStyle: {\n            normal: {\n                color: \"#fff\", // \u7ebf\u6761\u989c\u8272\n            },\n        },\n        label: {\n            show: true,\n            position: 'top',\n            textStyle: {\n                color: '#fff',\n            }\n        },\n        itemStyle: {\n            color: \"red\",\n            borderColor: \"#fff\",\n            borderWidth: 3\n        },\n        tooltip: {\n            show: false\n        },\n        areaStyle: {\n            normal: {\n                color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{\n                        offset: 0,\n                        color: '#eb64fb'\n                    },\n                    {\n                        offset: 1,\n                        color: '#3fbbff0d'\n                    }\n                ], false),\n            }\n        },\n        data: [393, 438, 485, 631, 689, 824, 987, 1000, 1100, 1200]\n    }]\n};\n\n        // \u4f7f\u7528\u521a\u6307\u5b9a\u7684\u914d\u7f6e\u9879\u548c\u6570\u636e\u663e\u793a\u56fe\u8868\u3002\n        myChart.setOption(option);\n    <\/script>\n</body>\n</html>\n"})}),"\n",(0,a.jsx)(e.h2,{id:"\u8be6\u60c5\u9875\u6298\u7ebf\u56fetab\u680f\u5207\u6362",children:"\u8be6\u60c5\u9875\u6298\u7ebf\u56feTab\u680f\u5207\u6362"}),"\n",(0,a.jsx)(e.p,{children:"detail.html\u4ee3\u7801\u5982\u4e0b\uff1a"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-html",children:'{% extends \'base.html\' %}\n\n{% block content%}\n\n<div class="container">\n    <div class="row" style="margin:20px auto;">\n        <div class="col-sm-6">\n            <img src="{{ course.big_img_url }}" class="card-img-top"\n                 alt="..." width="450px" height="260px">\n        </div>\n        <div class="col-sm-6">\n            <h4>{{ course.product_name }}</h4>\n            <div class="course-info">\u8bfe\u7a0b\u8bb2\u5e08\uff1a{{ course.lector_name }}</div>\n            <div class="course-info">\u6240\u5c5e\u673a\u6784\uff1a{{ course.provider }}</div>\n            <div class="course-info">\u8bfe\u7a0b\u8bc4\u5206\uff1a{{ course.score }}</div>\n            <div class="course-info">\u5b66\u4e60\u4eba\u6570\uff1a{{ course.learner_count}}</div>\n            <div class="course-price">\n                {% if course.discount_price %}\n                    \uffe5{{course.discount_price}}\n                    <span style="color: #666666;font-size: 14px;text-decoration: line-through;">\uffe5{{course.original_price}}</span>\n                {% elif not course.original_price  %}\n                    \u514d\u8d39\n                {% else %}\n                    \uffe5{{course.original_price}}\n                {% endif %}\n            </div>\n        </div>\n    </div>\n    <div class="col-sm">\n    <ul class="nav nav-tabs" id="myTab" role="tablist">\n      <li class="nav-item">\n        <a class="nav-link active" id="home-tab" data-toggle="tab" href="#home" role="tab" aria-controls="\u8bfe\u7a0b\u4ecb\u7ecd" aria-selected="true">\u8bfe\u7a0b\u4ecb\u7ecd</a>\n      </li>\n      <li class="nav-item">\n        <a class="nav-link" id="week-tab" data-toggle="tab" href="#week" role="tab" aria-controls="\u672c\u5468\u9500\u91cf" aria-selected="false">\u6700\u8fd1\u4e00\u5468\u9500\u91cf</a>\n      </li>\n      <li class="nav-item">\n        <a class="nav-link" id="month-tab" data-toggle="tab" href="#month" role="tab" aria-controls="\u672c\u6708\u9500\u91cf" aria-selected="true">\u6700\u8fd1\u4e00\u4e2a\u6708\u9500\u91cf</a>\n      </li>\n      <li class="nav-item">\n        <a class="nav-link" id="year-tab" data-toggle="tab" href="#year" role="tab" aria-controls="\u5e74\u5ea6\u9500\u91cf" aria-selected="false">\u6bcf\u6708\u9500\u91cf</a>\n      </li>\n    </ul>\n    <div class="tab-content" id="myTabContent" style="min-height:260px;padding:20px;background:#fbfbfb;">\n      <div class="tab-pane fade show active" id="home" role="tabpanel" aria-labelledby="home-tab">\n          {% for line in course.description.splitlines() %}\n                {{ line }} <br>\n          {% endfor %}\n      </div>\n      <div class="tab-pane fade" id="week" role="tabpanel" aria-labelledby="week-tab">\n          <div id="sale-week" style="width: 1000px;height:400px;"></div>\n      </div>\n      <div class="tab-pane fade" id="month" role="tabpanel" aria-labelledby="month-tab">\n          <div id="sale-month" style="width: 1000px;height:400px;"></div>\n      </div>\n      <div class="tab-pane fade" id="year" role="tabpanel" aria-labelledby="year-tab">\n          <div id="sale-year" style="width: 1000px;height:400px;"></div>\n      </div>\n    </div>\n    </div>\n</div>\n\n<script src="https://cdn.bootcdn.net/ajax/libs/echarts/4.7.0/echarts-en.common.js"><\/script>\n    <script type="text/javascript">\n        $(\'.nav-link\').click(function(){\n            var id = $(this).attr(\'id\')\n            var type =  id.split("-")[0]\n            var echarts_id = \'sale-\' + type\n\n            // \u57fa\u4e8e\u51c6\u5907\u597d\u7684dom\uff0c\u521d\u59cb\u5316echarts\u5b9e\u4f8b\n            var myChart = echarts.init(document.getElementById(echarts_id));\n\n            // \u6307\u5b9a\u56fe\u8868\u7684\u914d\u7f6e\u9879\u548c\u6570\u636e\n            myChart.setOption({\n                backgroundColor: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{\n                        offset: 0,\n                        color: \'#c86589\'\n                    },\n                    {\n                        offset: 1,\n                        color: \'#06a7ff\'\n                    }\n                ], false),\n                title: {\n                    text: "OCTOBER 2015",\n                    left: "center",\n                    bottom: "5%",\n                    textStyle: {\n                        color: "#fff",\n                        fontSize: 16\n                    }\n                },\n                grid: {\n                    top: \'20%\',\n                    left: \'10%\',\n                    right: \'10%\',\n                    bottom: \'15%\',\n                    containLabel: true,\n                },\n                xAxis: {\n                    type: \'category\',\n                    boundaryGap: false,\n                    data: [\'14\', \'15\', \'16\', \'17\', \'18\', \'19\', \'20\', \'21\', \'22\', \'23\'],\n                    axisLabel: {\n                        margin: 30,\n                        color: \'#ffffff63\'\n                    },\n                    axisLine: {\n                        show: false\n                    },\n                    axisTick: {\n                        show: true,\n                        length: 25,\n                        lineStyle: {\n                            color: "#ffffff1f"\n                        }\n                    },\n                    splitLine: {\n                        show: true,\n                        lineStyle: {\n                            color: \'#ffffff1f\'\n                        }\n                    }\n                },\n                yAxis: [{\n                    type: \'value\',\n                    position: \'right\',\n                    axisLabel: {\n                        margin: 20,\n                        color: \'#ffffff63\'\n                    },\n\n                    axisTick: {\n                        show: true,\n                        length: 15,\n                        lineStyle: {\n                            color: "#ffffff1f",\n                        }\n                    },\n                    splitLine: {\n                        show: true,\n                        lineStyle: {\n                            color: \'#ffffff1f\'\n                        }\n                    },\n                    axisLine: {\n                        lineStyle: {\n                            color: \'#fff\',\n                            width: 2\n                        }\n                    }\n                }],\n                series: [{\n                    name: \'\u6ce8\u518c\u603b\u91cf\',\n                    type: \'line\',\n                    smooth: true, //\u662f\u5426\u5e73\u6ed1\u66f2\u7ebf\u663e\u793a\n                    showAllSymbol: true,\n                    symbol: \'circle\',\n                    symbolSize: 6,\n                    lineStyle: {\n                        normal: {\n                            color: "#fff", // \u7ebf\u6761\u989c\u8272\n                        },\n                    },\n                    label: {\n                        show: true,\n                        position: \'top\',\n                        textStyle: {\n                            color: \'#fff\',\n                        }\n                    },\n                    itemStyle: {\n                        color: "red",\n                        borderColor: "#fff",\n                        borderWidth: 3\n                    },\n                    tooltip: {\n                        show: false\n                    },\n                    areaStyle: {\n                        normal: {\n                            color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{\n                                    offset: 0,\n                                    color: \'#eb64fb\'\n                                },\n                                {\n                                    offset: 1,\n                                    color: \'#3fbbff0d\'\n                                }\n                            ], false),\n                        }\n                    },\n                    data: [393, 438, 485, 631, 689, 824, 987, 1000, 1100, 1200]\n                }]\n            });\n\n        });\n    <\/script>\n\n\n{% endblock %}\n'})}),"\n",(0,a.jsx)(e.h2,{id:"\u8be6\u60c5\u9875\u6298\u7ebf\u56feajax\u5f02\u6b65\u52a0\u8f7d",children:"\u8be6\u60c5\u9875\u6298\u7ebf\u56feAjax\u5f02\u6b65\u52a0\u8f7d"}),"\n",(0,a.jsx)(e.p,{children:"detail.html \u4ee3\u7801\u5982\u4e0b\uff1a"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-html",children:"<script src=\"https://cdn.bootcdn.net/ajax/libs/jquery/3.5.1/jquery.js\"><\/script>\n<script src=\"https://cdn.bootcdn.net/ajax/libs/echarts/4.7.0/echarts-en.common.js\"><\/script>\n    <script type=\"text/javascript\">\n        $('.nav-link').click(function(){\n            var id = $(this).attr('id')\n            var type =  id.split(\"-\")[0]\n            var echarts_id = 'sale-' + type\n\n            // \u57fa\u4e8e\u51c6\u5907\u597d\u7684dom\uff0c\u521d\u59cb\u5316echarts\u5b9e\u4f8b\n            var myChart = echarts.init(document.getElementById(echarts_id));\n\n            // \u6307\u5b9a\u56fe\u8868\u7684\u914d\u7f6e\u9879\u548c\u6570\u636e\n            myChart.setOption({\n                backgroundColor: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{\n                        offset: 0,\n                        color: '#c86589'\n                    },\n                    {\n                        offset: 1,\n                        color: '#06a7ff'\n                    }\n                ], false),\n                title: {\n                    text: \"OCTOBER 2015\",\n                    left: \"center\",\n                    bottom: \"5%\",\n                    textStyle: {\n                        color: \"#fff\",\n                        fontSize: 16\n                    }\n                },\n                grid: {\n                    top: '20%',\n                    left: '10%',\n                    right: '10%',\n                    bottom: '15%',\n                    containLabel: true,\n                },\n                xAxis: {\n                    type: 'category',\n                    boundaryGap: false,\n                    data: ['14', '15', '16', '17', '18', '19', '20', '21', '22', '23'],\n                    axisLabel: {\n                        margin: 30,\n                        color: '#ffffff63'\n                    },\n                    axisLine: {\n                        show: false\n                    },\n                    axisTick: {\n                        show: true,\n                        length: 25,\n                        lineStyle: {\n                            color: \"#ffffff1f\"\n                        }\n                    },\n                    splitLine: {\n                        show: true,\n                        lineStyle: {\n                            color: '#ffffff1f'\n                        }\n                    }\n                },\n                yAxis: [{\n                    type: 'value',\n                    position: 'right',\n                    axisLabel: {\n                        margin: 20,\n                        color: '#ffffff63'\n                    },\n\n                    axisTick: {\n                        show: true,\n                        length: 15,\n                        lineStyle: {\n                            color: \"#ffffff1f\",\n                        }\n                    },\n                    splitLine: {\n                        show: true,\n                        lineStyle: {\n                            color: '#ffffff1f'\n                        }\n                    },\n                    axisLine: {\n                        lineStyle: {\n                            color: '#fff',\n                            width: 2\n                        }\n                    }\n                }],\n                series: [{\n                    name: '\u6ce8\u518c\u603b\u91cf',\n                    type: 'line',\n                    smooth: true, //\u662f\u5426\u5e73\u6ed1\u66f2\u7ebf\u663e\u793a\n                    showAllSymbol: true,\n                    symbol: 'circle',\n                    symbolSize: 6,\n                    lineStyle: {\n                        normal: {\n                            color: \"#fff\", // \u7ebf\u6761\u989c\u8272\n                        },\n                    },\n                    label: {\n                        show: true,\n                        position: 'top',\n                        textStyle: {\n                            color: '#fff',\n                        }\n                    },\n                    itemStyle: {\n                        color: \"red\",\n                        borderColor: \"#fff\",\n                        borderWidth: 3\n                    },\n                    tooltip: {\n                        show: false\n                    },\n                    areaStyle: {\n                        normal: {\n                            color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{\n                                    offset: 0,\n                                    color: '#eb64fb'\n                                },\n                                {\n                                    offset: 1,\n                                    color: '#3fbbff0d'\n                                }\n                            ], false),\n                        }\n                    },\n                    data: [393, 438, 485, 631, 689, 824, 987, 1000, 1100, 1200]\n                }]\n            });\n\n            // \u5f02\u6b65\u52a0\u8f7d\u6570\u636e\n            var url = '/course_data/' + {{ course.course_id }} + '/type/'+ type\n            $.get(url).done(function (data) {\n                data = JSON.parse(data)\n                // \u586b\u5165\u6570\u636e\n                myChart.setOption({\n                    title: {\n                        text: data.title,\n                    },\n                    xAxis: {\n                        data: data.categories\n                    },\n                    series: [{\n                        // \u6839\u636e\u540d\u5b57\u5bf9\u5e94\u5230\u76f8\u5e94\u7684\u7cfb\u5217\n                        name: '\u9500\u91cf',\n                        data: data.data\n                    }]\n                });\n            });\n        });\n    <\/script>\n"})}),"\n",(0,a.jsx)(e.p,{children:"routes.py\u4e2d\u6dfb\u52a0\u5982\u4e0b\u4ee3\u7801\uff1a"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-python",children:"import json\n\n@app.route('/course_data/<course_id>/type/<type>')\ndef course_data(course_id, type):\n    dict_value = {\n        'title': '\u4e00\u5468\u9500\u91cf',\n        'categories': ['2023-12-27', '2023-12-28', '2023-12-29'],\n        'data': [500, 600, 700]\n    }\n    result = json.dumps(dict_value)\n    return result\n"})}),"\n",(0,a.jsx)(e.h2,{id:"\u8be6\u60c5\u9875\u6298\u7ebf\u56fe\u4e2d\u4e09\u79cd\u7c7b\u578b\u65f6\u95f4\u67e5\u8be2\u7684sql\u8bed\u53e5",children:"\u8be6\u60c5\u9875\u6298\u7ebf\u56fe\u4e2d\u4e09\u79cd\u7c7b\u578b\u65f6\u95f4\u67e5\u8be2\u7684SQL\u8bed\u53e5"}),"\n",(0,a.jsx)(e.p,{children:"\u67e5\u8be2\u6700\u8fd1\u4e00\u5468\u7684SQL\u8bed\u53e5:"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-sql",children:"select create_time,learner_count from sale where course_id = 1004735001 and DATE_SUB(CURDATE(),INTERVAL 7 DAY) <= date(create_time) order by create_time\n"})}),"\n",(0,a.jsx)(e.p,{children:"\u6ce8\u610f\uff1acourse_id = 1004735001 \u9700\u8981\u4fee\u6539\u4e3a\u6570\u636e\u8868\u4e2d\u7684\u5177\u4f53\u7684id\u3002 \u5982\u679c\u6ca1\u6709\u67e5\u8be2\u7ed3\u679c\uff0c\u624b\u52a8\u4fee\u6539\u4e00\u4e0b\u8fd9\u6761\u8bb0\u5f55\u7684create_time, \u4fee\u6539\u4e3a\u5f53\u524d\u6700\u8fd1\u7684\u65f6\u671f\u3002"}),"\n",(0,a.jsx)(e.p,{children:"\u67e5\u8be2\u6700\u8fd1\u4e00\u4e2a\u6708\u7684SQL\u8bed\u53e5\uff1a"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-sql",children:"select create_time,learner_count from sale where course_id = 1004735001 and DATE_SUB(CURDATE(),INTERVAL 1 MONTH) <= date(create_time) order by create_time\n"})}),"\n",(0,a.jsx)(e.p,{children:"\u67e5\u8be2\u4e00\u5e74"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-sql",children:"select create_time,learner_count from sale where course_id = 1004735001 and create_time in ['2023-01-01',\n '2023-02-01',\n '2023-03-01',\n '2023-04-01',\n '2023-05-01',\n '2023-06-01',\n '2023-07-01',\n '2023-08-01',\n '2023-09-01',\n '2023-10-01',\n '2023-11-01',\n '2023-12-01'] order by create_time\n"})}),"\n",(0,a.jsx)(e.h2,{id:"\u83b7\u53d6\u6298\u7ebf\u56fe\u4e2d\u9500\u91cf\u6570\u636e",children:"\u83b7\u53d6\u6298\u7ebf\u56fe\u4e2d\u9500\u91cf\u6570\u636e"}),"\n",(0,a.jsx)(e.p,{children:"routes.py\u4e2d\u4fee\u6539course_data()\u4ee3\u7801\u5982\u4e0b\uff1a"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-python",children:"import datetime\nfrom app import db\n\n\n@app.route('/course_data/<course_id>/type/<type>')\ndef course_data(course_id,type):\n    if type == 'week':\n        title = '\u6700\u8fd1\u4e00\u5468\u9500\u91cf'\n        # \u67e5\u8be2\u6700\u8fd1\u4e00\u5468\u6570\u636e\n        condition = 'DATE_SUB(CURDATE(),INTERVAL 7 DAY) <= date(create_time)'\n        sql = f'select create_time,learner_count from sale where course_id = {course_id} and {condition} order by create_time'\n        sale_data = db.session.execute(sql)\n    elif type == 'month':\n        title = '\u6700\u8fd1\u4e00\u4e2a\u6708\u9500\u91cf'\n        # \u67e5\u8be2\u6700\u8fd1\u4e00\u4e2a\u6708\u7684\u6570\u636e\n        condition = 'DATE_SUB(CURDATE(),INTERVAL 1 MONTH) <= date(create_time)'\n        sql = f'select create_time,learner_count from sale where course_id = {course_id} and {condition} order by create_time'\n        sale_data = db.session.execute(sql)\n    else:\n        title = '\u672c\u5e74\u5ea6\u6bcf\u6708\u9500\u91cf'\n        # \u67e5\u8be2\u6bcf\u67081\u53f7\u7684\u6570\u636e\n        days = []\n        current_year = datetime.datetime.today().year\n        for i in range(1,13):\n            # 2020-01-01\n            days.append(f'{current_year}-{i:02}-01')\n        condition = f'create_time in {tuple(days)}'\n        sql = f'select create_time,learner_count from sale where course_id = {course_id} and {condition} order by create_time'\n        sale_data = db.session.execute(sql)\n\n    data = {}\n    create_time = []\n    learner_count = []\n    for item in sale_data:\n        create_time.append(item[0].strftime('%m-%d'))\n        learner_count.append(item[1])\n\n    data['title'] = title\n    data['categories'] = create_time\n    data['data'] = learner_count\n\n    # dict_value = {\n    #     'title': '\u4e00\u5468\u9500\u91cf',\n    #     'categories':['2020-1-1','2020-1-2','2020-1-3'],\n    #     'data':[500,600,700]\n    # }\n    result = json.dumps(data)\n    return result\n"})}),"\n",(0,a.jsx)(e.p,{children:"\u5982\u679c\u63d0\u793a\u5982\u4e0b\u9519\u8bef\uff1a"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{children:"sqlalchemy.exc.ArgumentError: Textual SQL expression 'select create_time,learne...' should be explicitly declared as text('select create_time,learne...')\n"})}),"\n",(0,a.jsx)(e.p,{children:"\u8fd9\u4e2a\u9519\u8bef\u8868\u793a\u5728\u4f7f\u7528SQLAlchemy\u65f6,\u4f20\u5165\u4e86\u4e00\u4e2a\u7eaf\u6587\u672c\u7684SQL\u8bed\u53e5,\u4f46\u6ca1\u6709\u7528text()\u51fd\u6570\u628a\u5b83\u6807\u8bb0\u4e3a\u6587\u672c\u3002"}),"\n",(0,a.jsx)(e.p,{children:"\u53ef\u4ee5\u8fd9\u6837\u4fee\u6b63routes.py\u4e2d\u7684course_data\uff0c \u5c06\u6bcf\u4e00\u4e2asql\u90fd\u4fee\u6539\u4e3asql = text(sql)\uff0c \u4f8b\u5982\uff1a"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-python",children:"from sqlalchemy import desc, text\n\n@app.route('/course_data/<course_id>/type/<type>')\ndef course_data(course_id,type):\n    if type == 'week':\n        title = '\u6700\u8fd1\u4e00\u5468\u9500\u91cf'\n        # \u67e5\u8be2\u6700\u8fd1\u4e00\u5468\u6570\u636e\n        condition = 'DATE_SUB(CURDATE(),INTERVAL 7 DAY) <= date(create_time)'\n        sql = f'select create_time,learner_count from sale where course_id = {course_id} and {condition} order by create_time'\n        sql = text(sql) # \u65b0\u589e\u4ee3\u7801\n        sale_data = db.session.execute(sql)\n"})})]})}function f(n={}){const{wrapper:e}={...(0,i.a)(),...n.components};return e?(0,a.jsx)(e,{...n,children:(0,a.jsx)(d,{...n})}):d(n)}},1151:(n,e,t)=>{t.d(e,{Z:()=>l,a:()=>s});var a=t(7294);const i={},r=a.createContext(i);function s(n){const e=a.useContext(r);return a.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function l(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:s(n.components),a.createElement(r.Provider,{value:e},n.children)}}}]);