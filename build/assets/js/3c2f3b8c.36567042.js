"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[7105],{6495:(n,e,r)=>{r.r(e),r.d(e,{assets:()=>d,contentTitle:()=>l,default:()=>p,frontMatter:()=>a,metadata:()=>i,toc:()=>t});var s=r(5893),o=r(1151);const a={},l="\u521b\u5efa\u7528\u6237",i={id:"Flask\u9879\u76ee:\u7f51\u6613\u4e91\u8bfe\u5802\u8bfe\u7a0b\u5206\u6790/\u7528\u6237\u6a21\u5757",title:"\u521b\u5efa\u7528\u6237",description:"\u5b89\u88c5flask_login:",source:"@site/docs/Flask\u9879\u76ee:\u7f51\u6613\u4e91\u8bfe\u5802\u8bfe\u7a0b\u5206\u6790/10.\u7528\u6237\u6a21\u5757.md",sourceDirName:"Flask\u9879\u76ee:\u7f51\u6613\u4e91\u8bfe\u5802\u8bfe\u7a0b\u5206\u6790",slug:"/Flask\u9879\u76ee:\u7f51\u6613\u4e91\u8bfe\u5802\u8bfe\u7a0b\u5206\u6790/\u7528\u6237\u6a21\u5757",permalink:"/docs/Flask\u9879\u76ee:\u7f51\u6613\u4e91\u8bfe\u5802\u8bfe\u7a0b\u5206\u6790/\u7528\u6237\u6a21\u5757",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Flask\u9879\u76ee:\u7f51\u6613\u4e91\u8bfe\u5802\u8bfe\u7a0b\u5206\u6790/10.\u7528\u6237\u6a21\u5757.md",tags:[],version:"current",sidebarPosition:10,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"\u4f7f\u7528\u5b8f\u5b9e\u73b0\u5206\u9875\u529f\u80fd",permalink:"/docs/Flask\u9879\u76ee:\u7f51\u6613\u4e91\u8bfe\u5802\u8bfe\u7a0b\u5206\u6790/\u4f7f\u7528\u5b8f\u5b9e\u73b0\u5206\u9875\u529f\u80fd"},next:{title:"\u6536\u85cf\u529f\u80fd\u5b9e\u73b0",permalink:"/docs/Flask\u9879\u76ee:\u7f51\u6613\u4e91\u8bfe\u5802\u8bfe\u7a0b\u5206\u6790/\u6536\u85cf\u529f\u80fd\u5b9e\u73b0"}},d={},t=[{value:"\u767b\u5f55\u9875\u9762\u8868\u5355\u9a8c\u8bc1",id:"\u767b\u5f55\u9875\u9762\u8868\u5355\u9a8c\u8bc1",level:2},{value:"Flask_login\u5b9e\u73b0\u767b\u5f55\u548c\u9000\u51fa",id:"flask_login\u5b9e\u73b0\u767b\u5f55\u548c\u9000\u51fa",level:2},{value:"Flask_Login\u767b\u5f55\u6743\u9650\u9a8c\u8bc1",id:"flask_login\u767b\u5f55\u6743\u9650\u9a8c\u8bc1",level:2},{value:"\u767b\u5f55\u6743\u9650\u5224\u65ad",id:"\u767b\u5f55\u6743\u9650\u5224\u65ad",level:2},{value:"\u4fee\u6539\u5bc6\u7801",id:"\u4fee\u6539\u5bc6\u7801",level:2}];function c(n){const e={code:"code",h1:"h1",h2:"h2",p:"p",pre:"pre",strong:"strong",...(0,o.a)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.h1,{id:"\u521b\u5efa\u7528\u6237",children:"\u521b\u5efa\u7528\u6237"}),"\n",(0,s.jsx)(e.p,{children:"\u5b89\u88c5flask_login:"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"pip install flask_login\n"})}),"\n",(0,s.jsxs)(e.p,{children:["app/",(0,s.jsx)(e.strong,{children:"init"}),".py \u5bfc\u5165\uff0c \u4ee3\u7801\u5982\u4e0b\uff1a"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-python",children:"from flask import Flask\nfrom flask_sqlalchemy import SQLAlchemy\nfrom flask_migrate import Migrate\nfrom flask_login import LoginManager\n\n\napp = Flask(__name__)\napp.config['SECRET_KEY'] = 'daxiongketang'\napp.config['SQLALCHEMY_DATABASE_URI'] = (\n    'mysql+pymysql://root:andy123456@localhost/daxiong?charset=utf8mb4'\n)\n\ndb = SQLAlchemy(app)\nmigrate = Migrate(app, db)\nlogin_manager = LoginManager(app)\n\n# \u5bfc\u5165\u8def\u7531\nfrom app import routes\n"})}),"\n",(0,s.jsx)(e.p,{children:"models.py\u521b\u5efaUser\u7c7b"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-python",children:"from app import db,login_manager\nfrom datetime import datetime\nfrom flask_login import UserMixin\n\n@login_manager.user_loader\ndef load_user(user_id):\n    return User.query.get(int(user_id))\n\nclass User(db.Model,UserMixin):\n    id = db.Column(db.Integer,primary_key=True,autoincrement=True)\n    username = db.Column(db.String(100),nullable=False)\n    email = db.Column(db.String(100),nullable=False,unique=True)\n    password = db.Column(db.String(200),nullable=False)\n    # \u591a\u5bf9\u591a\u5173\u7cfb\n    favorites = db.relationship('Course',secondary='collections',\n                                backref=db.backref('user',lazy='dynamic'),\n                                lazy='dynamic')\n"})}),"\n",(0,s.jsx)(e.p,{children:"\u6267\u884c\u8fc1\u79fb\u547d\u4ee4\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"flask db migrate\n"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"flask db upgrade\n"})}),"\n",(0,s.jsx)(e.p,{children:"\u68c0\u67e5\u6570\u636e\u5e93\u4e2d\uff0c\u4f1a\u65b0\u589e\u4e00\u4e2auser\u8868\u3002"}),"\n",(0,s.jsx)(e.p,{children:"\u4f7f\u7528shell\u547d\u4ee4\u521b\u5efa\u7528\u6237\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"flask shell\n"})}),"\n",(0,s.jsx)(e.p,{children:"\u8fdb\u5165shell\u547d\u4ee4\u3002"}),"\n",(0,s.jsx)(e.p,{children:"\u8f93\u5165\u5982\u4e0b\u547d\u4ee4\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-shell",children:">>> from app import db\n>>> from app.models import User\n>>> user = User()\n>>> from werkzeug.security import check_password_hash, generate_password_hash\n>>> password = generate_password_hash('123456')\n>>> user.username = 'test'\n>>> user.password = password\n>>> user.email = 'test@qq.com'\n>>> db.session.add(user)\n>>> db.session.commit()\n>>> check_password_hash(password, '123456')\n"})}),"\n",(0,s.jsx)(e.p,{children:"\u5982\u679c\u8981\u9000\u51fa\uff0c\u8f93\u5165exit()."}),"\n",(0,s.jsx)(e.h2,{id:"\u767b\u5f55\u9875\u9762\u8868\u5355\u9a8c\u8bc1",children:"\u767b\u5f55\u9875\u9762\u8868\u5355\u9a8c\u8bc1"}),"\n",(0,s.jsx)(e.p,{children:"\u521b\u5efalogin\u548clogout\u8def\u7531"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-python",children:"from flask import render_template,request,redirect,url_for,flash\nfrom sqlalchemy import desc,asc,and_,or_\nfrom flask_login import current_user,logout_user,login_user,login_required\nfrom werkzeug.security import check_password_hash,generate_password_hash\n\nfrom app import app,db\nfrom app.models import Course,User\nimport json\nimport datetime\nfrom app.forms import LoginForm,ChangePasswordForm,RegisterForm\n\n\n\n@app.route('/login/',methods=['GET','POST'])\ndef login():\n    if current_user.is_authenticated:\n        return redirect(url_for('index'))\n\n    form = LoginForm()\n    if form.validate_on_submit():\n\t      pass \n    return render_template('login.html',form=form)\n\n@app.route('/logout')\ndef logout():\n    logout_user()\n    return redirect(url_for('index'))\n"})}),"\n",(0,s.jsx)(e.p,{children:"\u5728app\u4e0b\u521b\u5efaforms.py\u6587\u4ef6\uff0c\u4ee3\u7801\u5982\u4e0b\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-python",children:"from flask_wtf import FlaskForm\nfrom wtforms import StringField, PasswordField\nfrom wtforms.validators import DataRequired, Length, Email, EqualTo,ValidationError\nimport email_validator\nfrom app.models import User\n\n\nclass LoginForm(FlaskForm):\n    email = StringField('\u90ae\u7bb1',\n                        validators=[\n                            DataRequired(message=\"\u90ae\u7bb1\u4e0d\u80fd\u4e3a\u7a7a\"),\n                            Email(message=\"\u65e0\u6548\u7684\u90ae\u7bb1\u5730\u5740\")])\n    password = PasswordField('\u5bc6\u7801',\n                             validators=[\n                                 DataRequired(message=\"\u5bc6\u7801\u4e0d\u80fd\u4e3a\u7a7a\"),\n                                 Length(min=6, max=25, message='\u5bc6\u7801\u957f\u5ea6\u4e3a6-25\u4e2a\u5b57\u7b26'),\n                             ])\n\n"})}),"\n",(0,s.jsx)(e.p,{children:"login.html\u4ee3\u7801\u5982\u4e0b\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-html",children:'{% extends \'base.html\' %}\n{% block content %}\n\n<style>\n    .login-container {\n        width: 500px;\n        margin: 100px auto;\n        padding: 20px 10px;\n        background-color: #eef1f4;\n        border-radius: .5rem;\n        padding: 20px;\n    }\n    .login-title {\n        text-align: center;\n    }\n    .login-form {\n        padding: 20px;\n    }\n</style>\n{% include \'layout.html\' %}\n\n<div class="login-container">\n    <h2 class="login-title">\u8d26\u53f7\u5bc6\u7801\u767b\u5f55</h2>\n    <form class="login-form" method="post" action="/login">\n        \x3c!-- \u83b7\u53d6url\u4e2d\u7684next\u53c2\u6570 --\x3e\n        <input type="hidden" name="next" value="{{ request.args.get(\'next\') }}" />\n        <div class="form-group">\n            {{ form.email.label() }}\n            {% if form.email.errors %}\n                {{ form.email(class="form-control is-invalid") }}\n                <div class="invalid-feedback">\n                    {% for error in form.email.errors %}\n                        <span>{{ error }}</span>\n                    {% endfor %}\n                </div>\n            {% else %}\n                {{ form.email(class="form-control") }}\n            {% endif %}\n        </div>\n        <div class="form-group">\n            {{ form.password.label() }}\n            {% if form.password.errors %}\n                {{ form.password(class="form-control is-invalid") }}\n                <div class="invalid-feedback">\n                    {% for error in form.password.errors %}\n                        <span>{{ error }}</span>\n                    {% endfor %}\n                </div>\n            {% else %}\n                {{ form.password(class="form-control") }}\n            {% endif %}\n        </div>\n        <div class="form-check" style="padding-bottom:10px">\n          <label class="form-check-label">\n            <input class="form-check-input" type="checkbox" name="remember"> \u8bb0\u4f4f\u6211\n          </label>\n        </div>\n        <button type="submit" class="btn btn-success btn-lg btn-block">\u767b\u5f55</button>\n        {{ form.csrf_token }}\n    </form>\n</div>\n\n{% endblock %}\n'})}),"\n",(0,s.jsx)(e.h2,{id:"flask_login\u5b9e\u73b0\u767b\u5f55\u548c\u9000\u51fa",children:"Flask_login\u5b9e\u73b0\u767b\u5f55\u548c\u9000\u51fa"}),"\n",(0,s.jsx)(e.p,{children:"\u5728app/routes.py\u4e2d\u6dfb\u52a0\u5982\u4e0b\u4ee3\u7801\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-python",children:"# routes.py\n@app.route('/login/', methods=['GET', 'POST'])\ndef login():\n    if current_user.is_authenticated:\n        return redirect(url_for('index'))\n    form = LoginForm()\n    if form.validate_on_submit():\n        # \u65b0\u589e\u4ee3\u7801\n        user = User.query.filter_by(email=form.email.data).first()\n        if user and check_password_hash(user.password, form.password.data):\n            login_user(user)\n            # \u83b7\u53d6next\u53c2\u6570\n            next_page = request.form.get('next')\n            return redirect(next_page) if next_page else redirect(url_for('index'))\n        else:\n            flash('\u90ae\u7bb1\u548c\u5bc6\u7801\u4e0d\u5339\u914d', 'danger')\n    return render_template('login.html', form=form)\n\n\n@app.route('/logout')\ndef logout():\n    logout_user()\n    return redirect(url_for('index'))\n"})}),"\n",(0,s.jsx)(e.p,{children:"templates\u4e0b\u65b0\u5efalayout.html\u6587\u4ef6\uff0c\u7528\u4e8e\u663e\u793a\u901a\u7528\u4fe1\u606f\u3002\u4ee3\u7801\u5982\u4e0b\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-html",children:'{% with messages = get_flashed_messages(with_categories=true) %}\n  {% if messages %}\n    {% for category , message in messages %}\n        <div class="alert alert-{{ category }} alert-dismissible fade show" role="alert">\n          {{ message }}\n          <button type="button" class="close" data-dismiss="alert" aria-label="Close">\n            <span aria-hidden="true">&times;</span>\n          </button>\n        </div>\n    {% endfor %}\n  {% endif %}\n{% endwith %}\n'})}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.code,{children:"\u6ce8\u610f"}),": \u4e3a\u4e86\u5b9e\u73b0next\u8df3\u8f6c\uff0c\u9700\u8981\u5728login\u9875\u9762\u4e2d\u83b7\u53d6next\u53c2\u6570\uff0c\u53ef\u4ee5\u8bbe\u7f6e\u4e3ahidden\u5c5e\u6027\uff0chtml\u4ee3\u7801\u5982\u4e0b\uff1a"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-html",children:'\x3c!-- \u83b7\u53d6url\u4e2d\u7684next\u53c2\u6570 --\x3e\n<input type="hidden" name="next" value="{{ request.args.get(\'next\') }}" />\n'})}),"\n",(0,s.jsx)(e.p,{children:"\u63d0\u4ea4\u8868\u5355\u65f6\u4f20\u5230\u5230login\u8def\u7531\u3002\u7136\u540e\u518d\u8def\u7531\u4e2d\u901a\u8fc7\u5982\u4e0b\u4ee3\u7801\u83b7\u53d6\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-python",children:"# routes.py\nnext_page = request.form.get('next')\n"})}),"\n",(0,s.jsx)(e.h2,{id:"flask_login\u767b\u5f55\u6743\u9650\u9a8c\u8bc1",children:"Flask_Login\u767b\u5f55\u6743\u9650\u9a8c\u8bc1"}),"\n",(0,s.jsx)(e.p,{children:"base.html\u4e2d\u65b0\u589e\u5224\u65ad\u662f\u5426\u767b\u5f55\u7684\u4ee3\u7801\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-html",children:'<ul class="navbar-nav">\n    {% if current_user.is_authenticated %}\n        <li class="nav-item dropdown">\n            <button class="btn btn-outline-success dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\n              \u6211\u7684\n            </button>\n            <div class="dropdown-menu" aria-labelledby="navbarDropdown">\n              <a class="dropdown-item" href="/favorites">\u6211\u7684\u6536\u85cf</a>\n                <div class="dropdown-divider"></div>\n              <a class="dropdown-item" href="/change_pwd">\u4fee\u6539\u5bc6\u7801</a>\n              <div class="dropdown-divider"></div>\n              <a class="dropdown-item" href="/logout">\u9000\u51fa\u767b\u5f55</a>\n            </div>\n        </li>\n    {% else %}\n        <li class="nav-item">\n            <a class="nav-link"  style="color:white;">\n            <button class="btn btn-outline-success" >\n              \u767b\u5f55\n            </button>\n            </a>\n        </li>\n    {% endif %}\n</ul>\n'})}),"\n",(0,s.jsx)(e.h2,{id:"\u767b\u5f55\u6743\u9650\u5224\u65ad",children:"\u767b\u5f55\u6743\u9650\u5224\u65ad"}),"\n",(0,s.jsx)(e.p,{children:"\u56e0\u4e3a\u5f88\u591a\u8def\u7531\u90fd\u9700\u8981\u5224\u65ad\u7528\u6237\u662f\u5426\u767b\u5f55\uff0c\u6bd4\u8f83\u7e41\u7410\uff0c\u6240\u4ee5\u4f7f\u7528flask_login\u4e2d\u7684\u88c5\u9970\u5668\u6765\u7edf\u4e00\u5b9e\u73b0\u8fd9\u4e2a\u529f\u80fd\u3002"}),"\n",(0,s.jsx)(e.p,{children:"\u5728routes.py\u4e2d\uff0c\u9876\u90e8\u5f15\u5165login_required, \u4ee3\u7801\u5982\u4e0b\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-python",children:"from flask_login import current_user, login_user, logout_user, login_required\n"})}),"\n",(0,s.jsx)(e.p,{children:"\u5728\u9700\u8981\u5224\u65ad\u7684\u7528\u6237\u662f\u5426\u767b\u5f55\u7684\u5730\u65b9\u5f15\u5165\u3002\u4ee3\u7801\u5982\u4e0b\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-python",children:"\nfrom flask_login import current_user, login_user, logout_user, login_required\n\n\n@app.route('/change_pwd')\n@login_required\ndef change_pwd():\n    return '\u4fee\u6539\u5bc6\u7801'\n"})}),"\n",(0,s.jsx)(e.p,{children:"\u5982\u679c\u6ca1\u6709\u767b\u5f55\uff0c\u76f4\u63a5\u8bbf\u95ee/change_pwd, \u8fd0\u884c\u7ed3\u679c\u5982\u4e0b\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"Unauthorized\nThe server could not verify that you are authorized to access the URL requested. You either supplied the wrong credentials (e.g. a bad password), or your browser doesn't understand how to supply the credentials required.\n"})}),"\n",(0,s.jsx)(e.p,{children:"\u8fd9\u79cd\u9519\u8bef\u63d0\u793a\u5e76\u4e0d\u53cb\u597d\uff0c\u53ef\u4ee5\u8bbe\u7f6eflask_login, \u4ee4\u5176\u8df3\u8f6c\u5230\u767b\u5f55\u9875\u3002"}),"\n",(0,s.jsxs)(e.p,{children:["\u5728app/",(0,s.jsx)(e.strong,{children:"init"}),".py\u6587\u4ef6\u4e2d\u914d\u7f6eflask_login\uff0c\u4ee3\u7801\u5982\u4e0b\uff1a"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-python",children:"# __init__.py\n\nfrom flask_login import LoginManager\n\n\nlogin_manager = LoginManager(app)\n# \u914d\u7f6eflask_login\nlogin_manager.login_view = 'login'\nlogin_manager.login_message = '\u8bf7\u5148\u767b\u5f55'\nlogin_manager.login_message_category = 'danger'\n"})}),"\n",(0,s.jsx)(e.h2,{id:"\u4fee\u6539\u5bc6\u7801",children:"\u4fee\u6539\u5bc6\u7801"}),"\n",(0,s.jsx)(e.p,{children:"\u521b\u5efa\u8def\u7531"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-python",children:"# routes.py\nfrom app.forms import LoginForm,ChangePasswordForm\n\n@app.route('/change_pwd/',methods=['GET','POST'])\n@login_required\ndef change_pwd():\n    form = ChangePasswordForm()\n    if form.validate_on_submit():\n        if check_password_hash(current_user.password, form.password.data):\n            # \u6839\u636e\u5f53\u524d\u7528\u6237id\u83b7\u53d6\u7528\u6237\u4fe1\u606f\n            user = User.query.filter_by(id=current_user.id).first()\n            # \u83b7\u53d6\u65b0\u5bc6\u7801\n            new_password = form.new_password.data\n            # \u5bf9\u65b0\u5bc6\u7801\u52a0\u5bc6\n            user.password = generate_password_hash(new_password)\n            # \u63d0\u4ea4\u5230\u6570\u636e\u5e93\n            db.session.commit()\n            # \u5c06\u6210\u529f\u6d88\u606f\u5b58\u5165\u95ea\u5b58\n            flash('\u4fee\u6539\u6210\u529f', 'success')\n            # \u4fdd\u5b58\u6210\u529f\u540e\uff0c\u8df3\u8f6c\u5230\u767b\u5f55\u9875\u9762\n            return redirect(url_for('change_pwd'))\n        else:\n            # \u5c06\u5931\u8d25\u6d88\u606f\u5b58\u5165\u95ea\u5b58\n            flash('\u539f\u59cb\u5bc6\u7801\u9519\u8bef', 'danger')\n    return render_template('change_pwd.html',form=form)\n"})}),"\n",(0,s.jsx)(e.p,{children:"\u5728app/forms.py\u6587\u4ef6\u4e2d\u65b0\u589eChangePasswordForm\uff0c \u4ee3\u7801\u5982\u4e0b\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-python",children:"# forms.py\n\nclass ChangePasswordForm(FlaskForm):\n    password = PasswordField('\u539f\u59cb\u5bc6\u7801',\n                             validators=[\n                                 DataRequired(message=\"\u539f\u59cb\u5bc6\u7801\u4e0d\u80fd\u4e3a\u7a7a\"),\n                                 Length(min=6, max=25, message='\u5bc6\u7801\u957f\u5ea6\u4e3a6-25\u4e2a\u5b57\u7b26'),\n                             ])\n    new_password = PasswordField('\u65b0\u5bc6\u7801',\n                             validators=[\n                                 DataRequired(message=\"\u65b0\u5bc6\u7801\u4e0d\u80fd\u4e3a\u7a7a\"),\n                                 Length(min=6, max=25, message='\u5bc6\u7801\u957f\u5ea6\u4e3a6-25\u4e2a\u5b57\u7b26')])\n    confirm_password = PasswordField('\u786e\u8ba4\u5bc6\u7801',\n                             validators=[\n                                 DataRequired(message=\"\u786e\u8ba4\u5bc6\u7801\u4e0d\u80fd\u4e3a\u7a7a\"),\n                                 EqualTo('new_password', message=\"2\u6b21\u8f93\u5165\u5bc6\u7801\u4e0d\u4e00\u81f4\")])\n\n"})}),"\n",(0,s.jsx)(e.p,{children:"\u5728templates\u4e0b\u65b0\u589echange_pwd.html\u6a21\u677f\u6587\u4ef6\uff0c\u4ee3\u7801\u5982\u4e0b\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-html",children:'{% extends \'base.html\' %}\n{% block content%}\n<style>\n    .login-container {\n        width: 500px;\n        margin: 100px auto;\n        padding: 20px 10px;\n        background-color: #eef1f4;\n        border-radius: .5rem;\n        padding: 20px;\n    }\n    .login-title {\n        text-align: center;\n    }\n    .login-form {\n        padding: 20px;\n    }\n</style>\n\n{% include "layout.html" %}\n\n<div class="login-container">\n    <h2 class="login-title">\u4fee\u6539\u5bc6\u7801</h2>\n    <form class="login-form" method="post" action="{{url_for(\'change_pwd\')}}">\n        <div class="form-group">\n            {{ form.password.label() }}\n            {% if form.password.errors %}\n                {{ form.password(class="form-control is-invalid") }}\n                <div class="invalid-feedback">\n                    {% for error in form.password.errors %}\n                        <span>{{ error }}</span>\n                    {% endfor %}\n                </div>\n            {% else %}\n                {{ form.password(class="form-control") }}\n            {% endif %}\n        </div>\n        <div class="form-group">\n            {{ form.new_password.label() }}\n            {% if form.new_password.errors %}\n                {{ form.new_password(class="form-control is-invalid") }}\n                <div class="invalid-feedback">\n                    {% for error in form.new_password.errors %}\n                        <span>{{ error }}</span>\n                    {% endfor %}\n                </div>\n            {% else %}\n                {{ form.new_password(class="form-control") }}\n            {% endif %}\n        </div>\n        <div class="form-group">\n            {{ form.confirm_password.label() }}\n            {% if form.confirm_password.errors %}\n                {{ form.confirm_password(class="form-control is-invalid") }}\n                <div class="invalid-feedback">\n                    {% for error in form.confirm_password.errors %}\n                        <span>{{ error }}</span>\n                    {% endfor %}\n                </div>\n            {% else %}\n                {{ form.confirm_password(class="form-control") }}\n            {% endif %}\n        </div>\n        <button type="submit" class="btn btn-success btn-lg btn-block">\u63d0\u4ea4</button>\n        {{ form.hidden_tag() }}\n    </form>\n</div>\n{% endblock %}\n'})})]})}function p(n={}){const{wrapper:e}={...(0,o.a)(),...n.components};return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(c,{...n})}):c(n)}},1151:(n,e,r)=>{r.d(e,{Z:()=>i,a:()=>l});var s=r(7294);const o={},a=s.createContext(o);function l(n){const e=s.useContext(a);return s.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function i(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(o):n.components||o:l(n.components),s.createElement(a.Provider,{value:e},n.children)}}}]);